# C Primer Plus读书心得

## 1.使用多种整数类型的原因

​		为什么说short类型“可能”比int类型占用的空间少，long类型“可能”比int
类型占用的空间多？因为C语言只规定了short占用的存储空间不能多于int，
long占用的存储空间不能少于int。这样规定是为了适应不同的机器。例如，
过去的一台运行Windows 3的机器上，int类型和short类型都占16位，long类
型占32位。后来，Windows和苹果系统都使用16位储存short类型，32位储存
int类型和long类型（使用32位可以表示的整数数值超过20亿）。现在，计算
机普遍使用64位处理器，为了储存64位的整数，才引入了long long类型。

​		现在，个人计算机上最常见的设置是，long long占64位，long占32位，
short占16位，int占16位或32位（依计算机的自然字长而定）。原则上，这4
种类型代表4种不同的大小，但是在实际使用中，有些类型之间通常有重
叠。
​		C 标准对基本数据类型只规定了允许的最小大小。对于 16 位机，short
和 int 的最小取值范围是[−32767,32767]；

## 2.int类型的选择

​		int类型那么多，应该如何选择？首先，考虑unsigned类型。这种类型的
数常用于计数，因为计数不用负数。而且，unsigned类型可以表示更大的正
数。
​		如果一个数超出了int类型的取值范围，且在long类型的取值范围内时，
使用long类型。然而，对于那些long占用的空间比int大的系统，使用long类
型会减慢运算速度。因此，如非必要，请不要使用long类型。另外要注意一
点：如果在long类型和int类型占用空间相同的机器上编写代码，当确实需要
32位的整数时，应使用long类型而不是int类型，以便把程序移植到16位机后
仍然可以正常工作。类似地，如果确实需要64位的整数，应使用long long类
型。
​		如果在int设置为32位的系统中要使用16位的值，应使用short类型以节省
存储空间。通常，只有当程序使用相对于系统可用内存较大的整型数组时，
才需要重点考虑节省空间的问题。使用short类型的另一个原因是，计算机中
某些组件使用的硬件寄存器是16位。

## 3. long常量和long long常量

​		通常，程序代码中使用的数字（如，2345）都被储存为int类型。如果使
用1000000这样的大数字，超出了int类型能表示的范围，编译器会将其视为
long int类型（假设这种类型可以表示该数字）。如果数字超出long可表示的
最大值，编译器则将其视为unsigned long类型。如果还不够大，编译器则将
其视为long long或unsigned long long类型（前提是编译器能识别这些类型）。
​		八进制和十六进制常量被视为int类型。如果值太大，编译器会尝试使用
unsigned int。如果还不够大，编译器会依次使用long、unsigned long、long
long和unsigned long long类型。
​		有些情况下，需要编译器以long类型储存一个小数字。例如，编程时要
显式使用IBM PC上的内存地址时。另外，一些C标准函数也要求使用long类
型的值。要把一个较小的常量作为long类型对待，可以在值的末尾加上l（小
写的L）或L后缀。使用L后缀更好，因为l看上去和数字1很像。因此，在int
为16位、long为32位的系统中，会把7作为16位储存，把7L作为32位储存。l
或L后缀也可用于八进制和十六进制整数，如020L和0x10L。
​		类似地，在支持long long类型的系统中，也可以使用ll或LL后缀来表示
long long类型的值，如3LL。另外，u或U后缀表示unsigned long long，如
5ull、10LLU、6LLU或9Ull。

## 4.打印short、long、long long和unsigned类型

​		打印unsigned int类型的值，使用%u转换说明；打印long类型的值，使
用%ld转换说明。如果系统中int和long的大小相同，使用%d就行。但是，这
样的程序被移植到其他系统（int和long类型的大小不同）中会无法正常工
作。在x和o前面可以使用l前缀，%lx表示以十六进制格式打印long类型整
数，%lo表示以八进制格式打印long类型整数。注意，虽然C允许使用大写或
小写的常量后缀，但是在转换说明中只能用小写。
​		C语言有多种printf()格式。对于short类型，可以使用h前缀。%hd表示以
十进制显示short类型的整数，%ho表示以八进制显示short类型的整数。h和l
前缀都可以和u一起使用，用于表示无符号类型。例如，%lu表示打印
unsigned long类型的值。程序清单3.4演示了一些例子。对于支持long long类
型的系统，%lld和%llu分别表示有符号和无符号类型。