# Docker

**Docker是解决运行环境和配置问题的软件容器，方便做持续集成并且有助于整体发布的容器虚拟化技术**

## 1. 虚拟机和容器比较

- 虚拟机

  它可以在一种操作系统里面运行的另一种操作系统，比如在Windows10系统里面运行Linux系统CentOS7.应用程序对此毫无感知，因为虚拟机看起来就跟真实系统一模一样，而对于底层系统来说，虚拟机就是普通文件，不需要就删掉，对其它部分毫无影响。这类虚拟机完美的运行了另外一套系统，能够使应用程序、操作系统和硬件的逻辑不变。

  传统虚拟机技术基于安装在主操作系统上的虚拟机管理系统如VM，然后创建虚拟机，虚拟出各种硬件，在虚拟机上安装操作系统，在操作系统中安装部署各种应用。

  - 缺点
    - 资源占用多
    - 冗余步骤多
    - 启动慢

- 容器

  Linux容器时与系统其他部分隔离开的一系列进程，从另一个镜像运行，并由该镜像提供支持进程所需的全部文件。容器提供的镜像包含了应用的所有依赖项，因而在从开发到测试再到生产的整个过程中，他都具有可移植性和一致性。

  Linux容器不是模拟一个完章的操作系统而是对进程进行隔离。有了容器，就可以将软件运行所需的所有资源打包到一个隔离的容器中。容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所有的库资源和设置。系统因此而变得高校并且保证部署在任何环境中的软件能够始终如一的运行。

**Docker容器是在操作系统层面实现虚拟化，直接复用本地主机的操作系统，而传统虚拟机则是在硬件层面实现虚拟化。与传统的虚拟机想比，Docker优势体现为启动速度快，占用体积小，同时每个容器之间相互隔离，每个容器都有自己的文件系统，容器之间进程不会相互影响，能区分计算资源。**

## 2. Docker安装

Docker官网：http://www.docker.com

Docker Hub官网(安装Docker镜像)：https://hub.docker.com/

### 2.1 安装须知

Docker并非是一个通用的容器工具，它依赖于已经存在并且运行的Linux内核环境。

Docker实质上是在已经运行的Linux下制造了一个隔离的文件环境，因此它执行效率几乎等同于所部署的Linux主机。

因此，**Docker必须部署在Linux内核上，如果其他系统想要部署Dokcier就必须安装一个Linux环境**

目前CentOS仅仅发行版本中的内核支持Docker。Docker运行在CeontOS7（64-bit）上，

要求系统为64位，Linux系统内核版本位3.8以上。

```
查看内核
cat /etc/redhat -release
```

### 2.2 Docker的基本组成

- 镜像image

  Docker镜像相当于一个只读模板。镜像可以用来创建Docker容器，一个镜像可以创建很多容器。

  他也相当于是一个root文件系统。比如官方镜像centos7，就包含了完整的以套centos7最小系统的root文件系统。

  相当于容器的"源代码"，dockers镜像文件类似于Java的类模板，而Docker容器实例类似于java中new出来的实例对象。

- 容器container

  Docker利用容器(container)独立运行的一个或者一组应用，应用程序或服务运行在容器里面，容器就类似于一个虚拟化的运行环境，容器是用镜像创建的运行实例。就像是JAVA中的类和实例对象一样，镜像是静态的定义，容器时镜像运行时的实体。容器位镜像提供了一个标准和隔离的运行环境。它可以被启动、开始、停止、删除。每个容器都是相互隔离的，保证安全的平台。

  可以将容器看作一个简易版的Linux环境(包括root用户权限，进程空间、用户空间和网络空间和运行在其中的应用程序)

- 仓库repository

  是集中存放镜像文件的场所。

  类似于

  Maven仓库，存放各种jar包的地方；

  github仓库，存放各种git项目的地方；

  Docker公司提供的官方registry被称为Docker Hub，存放各种镜像模板的地方。

  仓库分为公开仓库(Public)和私有仓库(Private)两种形式

  最大的公开仓库是Docker Hub(https://hub.docker.com/)，存放了数量庞大的镜像提供用户下载。

  