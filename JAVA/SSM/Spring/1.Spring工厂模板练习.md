# Spring 工厂模板练习

## 1.静态工厂

- 编写静态工厂

```java
// 静态工厂
public class FactoryPerson {
    public static Person person = null;
    
    public static Person getInstantance(){
        if (person == null){
            person = new Person("bigOne");
        }
        return person;
    }
}
```

- 编写XML文件

```xml
<bean id="person2" class="com.blili.beans.factorys.FactoryPerson" factory-method="getInstantance"></bean>
```

## 2.非静态工厂

- 编写非静态工厂

```java
import com.blili.beans.Person;

public class NonStaticFactoryPerson {
    public  Person person = null;
    
    public  Person getInstantance(){
        if (person == null){
            person = new Person("NoStatic");
        }
        return person;
    }
}
```

- 编写XML文件

```java
<bean id="person-factory" class="com.blili.beans.factorys.NonStaticFactoryPerson"></bean>
<bean id="person3" factory-bean="person-factory" factory-method="getInstantance"></bean>
```

## 3.FactoryBean

Spring中有两种类型的bean，一种是普通bean，另一种是工厂bean，即FactoryBean。工厂bean跟普通bean不同，其返回的对象不是指定类的一个实例，其返回的是该工厂bean的getObject方法所返回的对象。工厂bean必须实现org.springframework.beans.factory.FactoryBean接口。

FactoryBean是Spring容器提供的一种可以扩展容器对象实例化逻辑的接口，请不要将其与容器名称BeanFactory相混淆。它的实现类是专用于生产对象的bean。
 当某些对象的实例化过程过于烦琐，通过XML配置过于复杂，使我们宁愿使用Java代码来完成这 个实例化过程的时候，或者，某些第三方库不能直接注册到Spring容器的时候，就可以实现`org.spring.framework.beans.factory.FactoryBean`接口，给出自己的对象实例化逻辑代码。

- FactoryBean代码

```java
public interface FactoryBean { 
    //返回产品类对象
  Object getObject() throws Exception; 
  //返回产品类类型
  Class getObjectType();
  //返回产品类scope
  boolean isSingleton(); 
} 
```

- BeanFactory实现类

```java
public class PersonFactoryBean implements FactoryBean {
    
    @Override
    public Object getObject() throws Exception {
        return new Person("PersonFactoryBean");
    }
    
    @Override
    public Class<?> getObjectType() {
        return Person.class;
    }
    
    @Override
    public boolean isSingleton() {
        return true;
    }
}
```

- 编写xml

```xml
<bean id="person4" class="com.blili.beans.factorys.PersonFactoryBean"></bean>
```