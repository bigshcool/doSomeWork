# 服务器

## 1. 502 Bad Gateway

502 Bad Gateway 是指错误网关，表示的是后端服务器异常，直接返回。

**可能的原因:**

- 大量的并发请求，超过应用的最大响应数，那么后续的请求就会出现502错误，可以用过 **netstat**命令来查看连接数

- 当个请求超过限定的终止时间，也会出现502错误。
  - 网络拥塞
  - 数据库存在大量locked进程，数据库死锁导致超时，返回502请求终止。（但是此时Sql也许还在等待，**可能需要重启数据库服务或者kill掉死锁SQL进程了**）
- 防火墙错误设置，将合理请求拦截

**解决方法:**

```
access log
系统慢查询 log
数据库 log
```

结合以上三个 log，基本上可以确定由于程序问题导致的502，如果这些日志文件也无法定位问题时，我们可以进一步观察系统状态来分析原因。

## 2. 快照与克隆的区别





