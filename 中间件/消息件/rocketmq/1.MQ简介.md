# 一.MQ概述

## 1. MQ简介

MQ 是一种提供消息服务的中间件，也成为消息中间，是一套提供了消息生产，存储，消费券过程API的软件系统。消息就是数据，同时一般情况下，消息的体量一般不是很大。



## 2. MQ用途

从上网可以查看到很多关于MQ叙述，但是总结下来其实就以下三个点。

- 限流削峰

MQ可以将系统的**超量**请求暂存其中，一遍系统后期可以慢慢进行处理，从而避免了请求的丢失或者系统被压垮。

![image-20230511133602541](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20230511133602541.png)

- 异步解耦

上游系统对下游系统的调用若为**同步调用，则会大大的降低系统的吞吐量与并发度**，并且系统的耦合程度太高了。而异步调用则会解决这些问题，所以两层之间若要实现同步到异步的转化，一般的就是在上游系统和下游系统增加一个MQ层。

![image-20230511133922913](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20230511133922913.png)

- 数据收集

分布式系统会产生海量数据，分布式系统会产生海量数据，如：日志系统，监控数据，用户行为。针对这些数据流进行实时或者批量采集汇总，然后对这些数据进行大数据分析，这是当前互联网平台必备的技术。



## 3. 常用MQ产品

- ActiveMQ(单机w级吞吐量）

ActiveMQ是使用Java语言开发一款MQ产品。早期很多公司都是在使用，但是目前社区的活跃程度较低，目前很少使用到了。

- RabbitMQ(单机w级吞吐量)

  RabbitMQ是使用ErLang语言开发一款MQ产品。其吞吐量较Kafka与RocketMQ要低，且由于不是Java语言开发的，所以公司公司对内部实现定制化开发的难度较大。

- Kafka(单机10w吞吐量)

  Kafka时使用Scala/Java语言开发的一款MQ产品，其最大的特点是高吞吐率，常用于大数据领域的实时计算，日志采集等场景，并且其没有遵守任何常见的MQ协议，而是使用自研的协议。

- RocketMQ(单机10w吞吐量)

  RocketMQ是使用JAVA语言开发的一款MQ，经过数年阿里双十一的考验，性能与稳定性非常高，其没有遵守任何常见的MQ协议，而是使用自研的协议



