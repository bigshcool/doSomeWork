# RocketMQ基本概念

## 1. 消息(Message)

消息是指，消息系统所传输信息的物理载体，生产和数据消费的最小单位，每条消息必须属于一个主题。

## 2. 主题（Topic）

Topic表示一类消息的集合，每个主题包含若干个消息，每条消息只能属于一个主题，是RocketMQ进行消息订阅的基本单位。

一个生产者可以同时发哦是那个多种Topic的消息；而一个消费者只对某种特定的Topic感兴趣，即只可以订阅和消费一种Topic消息/

## 3 标签 (Tag)

## 4. 队列 (Queue)

存储消息的物理实体，一个Topic可以包含多个Queue，每个Queue中存放的就是该Topic的消息，一个Topic的Queue也被称为一个Topic中的消息分区(Partion)。

![image-20230511141133028](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20230511141133028.png)

一个消费者不能同时消费同一个Topic中的多个Queue；**一个Topic的Queue中的消息只能被一个消费组中的一个消费者消费，换句话说就是一个Topic可以被多个消费者消费，但是不能是同一个组里面的**



### 5. 消息标识(MessageID/Key)

RocketMQ中每一个消息都拥有唯一的MessageId，且可以携带具有业务标识的Key，以方便对消息的查询，不过需要注意的是，MessageI有两个，在生产者send()消息时，会自动生成一个MessageId(msgId),当消息达到Broker后，Broker也会自动生成一个MessageId(offsetMsgId).msgJId,offsetMsgId与Key都称为消息的标识。

- msgId: 由Produce端生成，其生生成规则为:

  produceIP + 进程IP + MessageClientIDSetter类的ClassLoader的hashcode + 当前时间 + Auto米处Integer自增计数器。

- offsetMsgId:由Broker端生成，其生产规则为brokerIP + 物理分区的offset

- key：由用户指定的业务相关的唯一标识

