# Redis命令

## 1.基础命令

- ping命令

  ![image-20221129151352811](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129151352811.png)

- set命令

  ```
  用来存储键值对:set 键 值
  ```

  ![image-20221129151700940](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129151700940.png)

- get命令

  ```
  获取值:get 键
  ```

  ![image-20221129151847007](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129151847007.png)

- select命令

  redis有16个数据库，默认使用的是数据库0

  ![image-20221129152230208](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129152230208.png)

```
# 使用select切换数据库，select 数据库编号
select 5
```

![image-20221129152342066](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129152342066.png)

- dbsize

```
# 当前数据库中的记录条数
dbsize
```

![image-20221129152507188](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129152507188.png)

- flushdb

```
# 删除当前数据库的所有记录
flushdb
```

![image-20221129152749318](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129152749318.png)

由于此条记录较为危险，将其通过rename-command配置取消了。

- flushall

```
# 删除所有数据库中的所用记录
flushall
```

- exit/quit

```
# exit 与 quit 只是退出当前redis-cli客户端，但是服务端未被关闭
exit
```

![image-20221129153207603](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129153207603.png)

- shutdown 

```
# 关闭服务器端
shutdown
```

![image-20221129153327367](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129153327367.png)

## 2.  key操作

- keys

  格式 ：KEYS pattern

  功能  : 查找所有符合给定模式key，pattern的正则表达式

  说明 ：KEYS速度非常快，**但在一个大的数据库中使用他可能会阻塞当前服务器的服务**，**所以生产环境中一般那不使用该命令，而使用scan命令**

  - keys *

     ```
    # 代表匹配任意字符
    keys *
     ```

    

    ![image-20221129155444435](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129155444435.png)

  - keys h*

    ```
    # 匹配h开头的key
    keys h*
    ```

    ![image-20221129155549063](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129155549063.png)

  - keys \*o\*

    ```
    # 匹配含有o的key
    keys *o*
    ```

    ![image-20221129155730660](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129155730660.png)

- exists

  EXISTS KEY 

  判断是否存在KEY-VALUE键值对

  返回值为1则有，返回值为0则没有

  ```
  exists hero
  ```

  

  ![image-20221129160156007](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129160156007.png)



- del

  del key

  根据key删除键值对

  返回0则删除失败，返回其他数字就是删除键值对的个数。

  ```
  # 参数可以有一个，也可以有多个
  del hero 
  # 参数可以有，
  del hero hope
  ```

  ![image-20221129160454206](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129160454206.png)

- rename

  - 格式: rename key newkey
  - 功能:将key改名为newkey
  - 说明:当key与newkey相同，或者key不在的时候返回一个错误，当newkey已经存在时，RENAME命令将覆盖就职，改名成果提示OK，失败返回一个错误。

  ![image-20221129160852697](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129160852697.png)

- move

  - 格式:MOVE key db
  - 功能：将当前数据库的key移动到给定的数据库db当中
  - 说明：如果当前数据库(源数据库)和给定数据库（目标数据库）有相同名字的给定key，或者key不存在当前数据库，那么MOVE没有任何效果，移动成果返回1，失败返回0

  ![image-20221129161209637](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129161209637.png)

- type

  - 返回:TYPE key

  - 功能：返回key所存储的值的类型

  - 说明：返回值有以下六种。

    - none(key不存在)
    - string(字符串)
    - list(列表)
    - set(集合)
    - zset(有序集合)
    - hash(hash表)

    ![image-20221129161705426](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129161705426.png)

- expire与pexpire

  - 格式: EXPIRE key seconds
  - 功能:为给定key设置生存时间。当 key过期时，它会被自动删除。expire的时间单位为秒，pexpire的时间单位为毫秒，在Redis中，带有生存时间的key被称为"易失的volatile"
  - 说明:生存时间设置成功1。若key不存在时返回0，rename不会改变key的生存时间

  ![image-20221129163126925](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129163126925.png)

- ttl和pttl

  - 格式:TTL key

  - 功能:TTL ,time to live ,返回给定key的剩余生存时间

  - 说明:其返回值存在三种可能

    - 当key不存在的时候返回-2
    - 当key存在但是没有设置生存时间，返回-1
    - 否则，返回key的剩余生存时间，ttl命令返回的时间单位为秒，而pttl命令返回的是毫秒

    ![image-20221129195145172](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129195145172.png)

- persist
  - 格式: PERSIST key
  - 功能:去除给定key的生存时间，将这个key转化从“易失的”到“持久的”
  - 说明:当生存时间移除成功时，返回1；若key不存在或者key没有设置生存时间则返回0

![image-20221129232345091](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129232345091.png)

- randomkey

  - 格式:RANDOMKEY
  - 功能:从当前数据库随机返回(不删除)一个key
  - 说明:当数据哭不为空时，返回一个key，当数据库为空时，返回nil

  ![image-20221129232523950](https://raw.githubusercontent.com/bigshcool/myPic/main/image-20221129232523950.png)